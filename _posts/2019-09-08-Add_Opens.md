---
layout: post
title: Experimenting with --add-opens
date: 2019-09-08 6:00:00
categories: jruby_art update
keywords: 'JRubyArt, jdk11, development, modules, encapsulation'
---
Further exploration of using `--add-opens` in java_args.txt in JRubyArt (should also work with propane). What I have found is that the module `org.jruby.dist` is not recognized in my setup (jdk12 and JRuby-9.2.8.0) so instead I tried `ALL-UNNAMED` which is what currently applies to the processing and JRubyArt packages anyway.

Running the simple fractions sketch gives the following warning without any `java_args.txt`:-

```bash
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by com.headius.backport9.modules.Modules to method java.lang.Object.finalize()

```

So I added `--add-opens java.base/java.lang=ALL-UNNAMED` to java_args.txt

Running fraction this time gives:-

```bash
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by com.headius.backport9.modules.Modules to field java.io.FileDescriptor.fd

```

So I added `--add-opens java.base/java.io=ALL-UNNAMED` the ran sketch again which gave the following warning:-

```bash
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by com.headius.backport9.modules.Modules to method java.awt.Component.paramString()
WARNING: Please consider reporting this to the maintainers of com.headius.backport9.modules.Modules

```

Finally I added `--add-opens java.desktop/java.awt=ALL-UNNAMED` and the sketch ran with no illegal reflective-access warnings. In the future presumably I would be able to be more specific about the modules that require reflective access.
